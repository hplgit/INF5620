<!DOCTYPE html>
<!--
Automatically generated HTML file from Doconce source
(https://github.com/hplgit/doconce/)
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Doconce: https://github.com/hplgit/doconce/" />
<meta name="description" content="Installation of a Vagrant machine">



<style type="text/css">
    /* bloodish style */

    body {
      font-family: Helvetica, Verdana, Arial, Sans-serif;
      color: #404040;
      background: #ffffff;
    }
    h1 { font-size: 1.8em;  color: #8A0808; }
    h2 { font-size: 1.5em;  color: #8A0808; }
    h3, h4 { color: #8A0808; }
    a { color: #8A0808; text-decoration:none; }
    tt { font-family: "Courier New", Courier; }
    
    p { text-indent: 0px; }
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    p.caption { width: 80%; font-style: normal; text-align: left; }
    hr.figure { border: 0; width: 80%; border-bottom: 1px solid #aaa}

</style>

</head>

<!-- tocinfo
{'highest level': 2,
 'sections': [(' Installation instructions ', 2, None, '___sec0'),
              (' Troubleshooting: shared directory is invisible ',
               2,
               None,
               '___sec1'),
              (' Troubleshooting: "couldn\'t connect to display ..." ',
               2,
               None,
               '___sec2'),
              (' Troubleshooting: Internet is not reachable ',
               2,
               None,
               '___sec3'),
              (' Working with an initialized Vagrant machine ',
               2,
               None,
               '___sec4'),
              (' A typical session with writing and testing Python programs ',
               2,
               None,
               '___sec5')]}
end of tocinfo -->

<body>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "AMS"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- Fix slow MathJax rendering in IE8 -->
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">




    
<!-- ------------------- main content ---------------------- -->

<!-- Mako Variables: COURSE (INF1100 or INF5620) -->

<p>

<title>Installation of a Vagrant machine</title>

<center><h1>Installation of a Vagrant machine</h1></center>  <!-- document title -->

<p>
A Vagrant machine is a file that you can download and install on
your machine, and it gives you access to a complete Ubuntu computer
in a Mac or Windows environment. In the following,
the prompt <code>Terminal></code> indicates a Unix terminal window on Mac or a
Command Prompt window on Windows (called Ledetekst in Norwegian).
The prompt <code>Machine></code> indicates a terminal window where Ubuntu is
running (in a Vagrant machine).

<h3>Installation instructions  <a name="___sec0"></a></h3>

<p>
<b>Step 1.</b>
Download and install <a href="https://www.virtualbox.org/wiki/Downloads">VirtualBox</a>. Choose the version
according to the operating system on the host.
For example, if you want to build or run Vagrant machines under Mac OS X, choose
<em>VirtualBox x.y.z for OS X hosts</em>, where <code>x.y.z</code> is the version number
of VirtualBox. Double click the downloaded <code>.dmg</code> file to install
Vagrant. Those who work on a Windows machines will select <em>VirtualBox
x.y.z for Windows hosts</em>, which downloads an <code>.exe</code> file which can just
be double clicked to perform the installation.

<p>
<b>Step 2.</b>
Download and install <a href="http://downloads.vagrantup.com/">Vagrant</a>.
Choose the latest version and the installation file corresponding to
the host's operating system (where you installed VirtualBox).  On a Mac, you
select the <code>Vagrant-x.y.z.dmg</code> file (<code>x.y.z</code> denotes the version of
the software), on Windows the <code>Vagrant_x.y.z.msi</code> file is the
relevant choice.
On Ubuntu, select <code>vagrant_x.y.z_*.deb</code> and install it
by <code>sudo dpkg -i vagrant_x.y.z_*.deb</code>.

<p>
<b>Step 3 for Windows users.</b>
If you have a Windows machine, you should
install <a href="http://cygwin.com/install.html">Cygwin</a>.
Download the Cygwin's <a href="http://cygwin.com/setup.exe">setup.exe</a> file and follow
the instructions given by the installer. Make sure you
manually select the 'X11' category during installation. Cygwin is
not needed on Mac computers.

<p>
<b>Step 4.</b>
Start X11: run Applications - Utilities - X11 on a Mac,
or Start - All Programs - Cygwin-X - XWin Server on Windows.

<p>
<b>Step 5.</b>
Move to your home directory and make a new directory
<code>vagrant</code> and a subdirectory <code>projects</code>:

<p>

<!-- code=bash (from !bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Terminal&gt; <span style="color: #008000">cd</span>
Terminal&gt; mkdir vagrant
Terminal&gt; mkdir vagrant/projects
Terminal&gt; <span style="color: #008000">cd </span>vagrant
</pre></div>
<p>
All files that you run from the Vagrant machine are supposed
to reside in <code>vagrant/projects</code> and its subdirectories.

<p>
<b>Step 6.</b>
Download the file from <a href="http://goo.gl/ta977B"><tt>http://goo.gl/ta977B</tt></a>
and store it as <code>inf5620.box</code> in the <code>vagrant</code> directory.
The file is <em>big</em>, 3.8 Gb, and may take hours to download! Make sure you have
a stable Internet connection and that you do not bring your computer
to sleep before the complete file is downloaded.

<p>
<b>Step 7.</b>
Make sure you stand in the <code>vagrant</code> directory.
Run

<p>

<!-- code=bash (from !bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Terminal&gt; vagrant box add inf5620 inf5620.box
Terminal&gt; vagrant init inf5620
Terminal&gt; vagrant up
Terminal&gt; vagrant ssh
</pre></div>
<p>
You are now inside a full-blown Ubuntu system with all software you need
for the course.

<p>
<b>Step 8.</b>
Open a file <code>vagrant/projects/test1.py</code> in an editor on the host system
and write the following lines in the file:

<p>

<!-- code=python (from !bc pypro) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">numpy</span> <span style="color: #008000; font-weight: bold">as</span> <span style="color: #0000FF; font-weight: bold">np</span>
<span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">matplotlib.pyplot</span> <span style="color: #008000; font-weight: bold">as</span> <span style="color: #0000FF; font-weight: bold">plt</span>
x <span style="color: #666666">=</span> np<span style="color: #666666">.</span>linspace(<span style="color: #666666">0</span>, <span style="color: #666666">3</span>, <span style="color: #666666">11</span>)
y <span style="color: #666666">=</span> np<span style="color: #666666">.</span>exp(<span style="color: #666666">-</span>x)
plt<span style="color: #666666">.</span>plot(x, y)
plt<span style="color: #666666">.</span>show()
</pre></div>
<p>
Save the file. Move to the terminal window with the Ubuntu (Vagrant) machine.
Run

<p>

<!-- code=bash (from !bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Machine&gt; <span style="color: #008000">cd</span> /vagrant/projects
Machine&gt; python test1.py
</pre></div>
<p>
You should see a plot of \( e^{-x} \) on the screen. If you encounter
any problems, read the
paragraphs below.

<h3>Troubleshooting: shared directory is invisible  <a name="___sec1"></a></h3>

<p>
It may happen that the <code>/vagrant</code> directory seems empty inside
the Vagrant machine. Two steps will fix this problem. First,
run

<p>

<!-- code=bash (from !bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Machine&gt; sudo /etc/init.d/vboxadd setup
</pre></div>
<p>
inside the Vagrant machine. Second, log out and run

<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Terminal&gt; sudo vagrant reload
</pre></div>
<p>
outside the Vagrant machine.
Then do <code>vagrant ssh</code> and take an <code>ls /vagrant</code> to see that the
files in the project directory (e.g., <code>Vagrantfile</code> and the Vagrant
box) are visible.

<h3>Troubleshooting: "couldn't connect to display ..."  <a name="___sec2"></a></h3>

<p>
This error message points to the problem that X11 graphics cannot
be shown on the host. It should be sufficient to start X11 on
the host, see Step 4 above.

<h3>Troubleshooting: Internet is not reachable  <a name="___sec3"></a></h3>

<p>
A test if Internet is reachable is to run a <code>ping</code> command inside
the machine, e.g.,

<p>

<!-- code=bash (from !bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Machine&gt; ping us.ubuntu.archive.com
</pre></div>
<p>
A hanging command indicates that Internet is not reachable.
Log out of the box, run <code>vagrant reload</code>, and
<code>vagrant ssh</code>. Try the <code>ping</code> command again.

<h3>Working with an initialized Vagrant machine  <a name="___sec4"></a></h3>

<p>
The daily work with the Vagrant machine is very easy. Simply go to the <code>vagrant</code>
directory where the machine resides and run

<p>

<!-- code=bash (from !bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Terminal&gt; vagrant up
Terminal&gt; vagrant ssh
</pre></div>
<p>
You are now inside the machine and can reach
files on the host from
<code>/vagrant/projects</code>.
Log out with Ctrl-D and in again with <code>vagrant ssh</code>.
Create and edit files on the host in <code>~/vagrant/projects</code> and its
subdirectories.

<p>
Before closing a laptop or shutting it down, it is recommended
to log out of the Vagrant machine and run <code>vagrant suspend</code>.

<h3>A typical session with writing and testing Python programs  <a name="___sec5"></a></h3>

<p>
Here is a worked example on creating a Python program on Windows or Mac
running it on Ubuntu.
Go to the vagrant project directory on
your Windows or Mac computer,
make a new directory <code>mytest</code>, go to this directory, and
launch a text editor, such as TextEdit on Mac or Notepad++ on Windows,
to create a Python program <code>test.py</code>.
The relevant Unix commands are

<p>

<!-- code=bash (from !bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Terminal&gt; <span style="color: #008000">cd</span> ~/vagrant/projects
Terminal&gt; mkdir mytest
Terminal&gt; <span style="color: #008000">cd </span>mytest
Terminal&gt; gedit test.py&amp;
</pre></div>
<p>
Write the following code in <code>test.py</code>:

<p>

<!-- code=python (from !bc pypro) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">print</span> <span style="color: #BA2121">&#39;Hello!&quot;</span>
</pre></div>
<p>
Save the file.

<p>
In another terminal window, go to the <code>vagrant</code> directory and
start the vagrant machine if it is not already running:

<p>

<!-- code=bash (from !bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Terminal&gt; <span style="color: #008000">cd</span> ~/vagrant
Terminal&gt; vagrant up
Terminal&gt; vagrant ssh
</pre></div>
<p>
You are now inside an Ubuntu machine in this terminal window.

<p>
Inside Ubuntu,
move to the <code>mytest</code> directory which is shared with your Mac or Windows
computer:

<p>

<!-- code=bash (from !bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Machine&gt; <span style="color: #008000">cd</span> /vagrant/projects/mytest
</pre></div>
<p>
Run the <code>test.py</code> program:

<p>

<!-- code=bash (from !bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Terminal&gt; python test.py
  File <span style="color: #BA2121">&quot;test.py&quot;</span>, line 1
    print &#39;Hello!&quot;
                 ^
SyntaxError: EOL <span style="color: #008000; font-weight: bold">while </span>scanning string literal
</pre></div>
<p>
You need to correct the bug. Go to the text editor with the <code>test.py</code>
on your Windows or Mac computer and change the double quote to a single
quote:

<p>

<!-- code=python (from !bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">print</span> <span style="color: #BA2121">&#39;Hello!&#39;</span>
</pre></div>
<p>
Go to the terminal window where the Ubuntu machine is running and rerun
the program:

<p>

<!-- code=bash (from !bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Machine&gt; python test.py
Hello!
</pre></div>
<p>
You should now understand how you edit programs on your Windows or Mac
computer and how you run the programs inside the Ubuntu
machine in a terminal window. Just remember that <code>/vagrant</code> in Ubuntu
corresponds to the directory <code>~/vagrant</code> on the Mac or Windows computer.

<!-- ------------------- end of main content --------------- -->


</body>
</html>
    

